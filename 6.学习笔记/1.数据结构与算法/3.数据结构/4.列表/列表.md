# 列表

列表是一种线性数据结构，它由一系列元素组成，这些元素按照顺序排列。 这些元素不拘泥于数据类型，并且每一个元素都有一个索引，可以有重复元素。 
列表的实现可以基于数组或链表，但是数组的长度不可变，因此一般使用动态数组（C++中的`vector`）或者链表来实现。

## 列表的实现

### C语言版本

```c
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>

// 定义列表结构体
typedef struct MyList{
    int *arr;           // 动态数组存储元素
    int capacity;      // 列表的容量
    int currentsize;   // 列表当前的大小
    double extendRatio;// 扩容比例
}MyList;

// 定义函数，创建列表
MyList *Newlist(){
    MyList *nums = malloc(sizeof(MyList));//结构体首先要分配内存
    nums->capacity = 10;
    nums->arr = (int *)malloc(sizeof(int));//动态数组的实现需要分配内存
    nums->currentsize = 0;
    nums->extendRatio = 2;
    return nums;
}

// 释放内存（析    构）

void deletelist(MyList *nums){
    free(nums->arr);//先释放所定义列表中的一个动态数组
    free(nums);//再把整个列表进行释放。
}


// 定义函数，获得函数当前容量和当前含有元素个数

int Currentcapacity(MyList *nums){
    int n = nums->capacity;
    return n;
}

int Currentsize(MyList *nums){
    return nums->currentsize;
}

//定义函数，扩容列表

void ExtendList(MyList *nums){
    int NewCapacity = Currentcapacity(nums) * (nums->extendRatio);

    // 这个定义的extend是暂存，最后仍是回归到nums
    int *extend = (int *)malloc(sizeof(int) * NewCapacity);
    int *temp = nums->arr;

    // 把原数组中的所有已存在的元素拷贝到extend里面

    for(int i = 0;i<Currentsize(nums);i++){
        extend[i] = nums->arr[i];
    }

    // 这里释放原数组内存

    free(temp);

    // 更新即可(已经释放了原有函数的内存，这是直接将分配好的extend直接给nums即可)

    nums->arr = extend;
    nums->capacity = NewCapacity;
}

// 定义函数，访问或更新列表元素

int get(MyList *nums,int index){
    assert(index >=0 && index <Currentsize(nums));
    return nums->arr[index];
}

void set(MyList *nums,int index,int num){
    assert(index >=0 && index <Currentsize(nums));
    nums->arr[index] = num;
}

// 定义函数，在尾部添加元素

void add(MyList *nums,int num){
    if(Currentsize(nums) == Currentcapacity(nums)){
        ExtendList(nums);
    }
    nums->arr[nums->currentsize] = num;
    nums->currentsize++;
}

// 定义函数，在指定位置插入元素

void insert(MyList *nums,int index,int num){
    assert(index >=0 && index < Currentsize(nums));
    if(Currentsize(nums) == Currentcapacity(nums)){
        ExtendList(nums);
    }
    for(int i = Currentsize(nums);i>index;i--){
        nums->arr[i] = nums->arr[i-1];
    }
    nums->arr[index] = nums;
    nums->currentsize++;
}

// 定义函数，删除指定位置元素

void delete(MyList *nums,int index){
    assert(index >=0 && index < Currentsize(nums));
    for(int i = index;i < Currentsize(nums)-1;i++){
        nums->arr[i] = nums->arr[i+1];
    }
    nums->currentsize--;
}

// 定义函数，将列表转换成数组

int *toArray(MyList *nums){
    return nums->arr;
}
```

## 列表的操作

由于C语言没有内置的列表类型，上述的列表实现过程比较底层。接下来，用C++语言来展示列表的常见操作。

### 列表的创建

```cpp
#include <vector>

using namespace std;

vector<int> myList; // 创建一个空的整数列表
```


