# 前缀和

前缀和（Prefix Sum）是一种**预处理技巧**，用于快速计算数组或序列中某个区间的和。通过预先计算并存储数组的前缀和，可以在常数时间内回答区间和查询，从而提高算法的效率。

## 针对的问题

前缀和要解决的问题就是**快速求和**，通过预处理数组，使得在后续查询中能够快速计算任意区间的和。

## 什么是前缀和

- 前缀：某个位置之前的所有元素。
- 和：这些元素的总和。

因此前缀和就是：**从开头到当前位置的所有元素的和**，并且存储在一个新的数组中。

## 实例解释

假设有一个 5 天的零花钱记录：

```text
天数：  1   2   3   4   5
金额： 10  20  15  25  30
```

当前要解决的问题是：

- 前三天总共花了多少钱？
- 第 2 天到第 4 天总共花了多少钱？

**传统方法**：每次查询时都要遍历求和：

- 第 1-3 天：10 + 20 + 15 = 45
- 第 2-4 天：20 + 15 + 25 = 60

**前缀和方法**：

```text
原始数组：a[1] = 10, a[2] = 20, a[3] = 15, a[4] = 25, a[5] = 30
前缀和数组：pre[0] = 0
            pre[1] = a[1] = 10
            pre[2] = a[1] + a[2] = 30
            pre[3] = a[1] + a[2] + a[3] = 45
            pre[4] = 60
            pre[5] = 90
```

这样一来，当我们想要查找第 L 天到第 R 天的总和时，可以通过前缀和数组快速计算：

sum(L, R) = pre[R] - pre[L-1]

这样的话是不是就很快了。

针对此例，有具体代码实现如下：

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    int n = 5; // 天数
    vector<int> a = {0, 10, 20, 15, 25, 30}; // 零花钱数组，a[0]未使用
    vector<int> pre(n + 1, 0); // 前缀和数组，初始化为0
    for (int i = 1; i <= n; i++) {
        pre[i] = pre[i - 1] + a[i]; // 计算前缀和
    }

    // 查询第1-3天的总和
    cout << "第1-3天总和: " << pre[3] << endl; // 输出45

    // 查询第2-4天的总和
    int L = 2, R = 4;
    cout << "第2-4天总和: " << pre[R] - pre[L - 1] << endl; // 输出60
    return 0;
}
```
