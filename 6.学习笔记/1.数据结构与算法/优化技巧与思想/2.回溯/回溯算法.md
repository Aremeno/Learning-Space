# 回溯算法

## 是什么？

回溯算法（Backtracking）是一种系统地搜索问题解空间的算法设计技术，它通常采用**深度优先搜索**策略，在搜索过程中逐步构建解，当发现当前路径无法得到有效解时，便**回溯**到上一步，尝试其他可能的路径，直到找到所有解或确定无解为止。

**核心思想**：

- **试探性前进**：从某个初始状态出发，尝试一个可能的选择，进入下一个状态。
- **条件检查**：在每一步选择后，检查当前状态是否满足问题的约束条件。
- **失败回溯**：如果当前状态不满足条件，撤销上一步的选择，返回到上一个状态，尝试其他选择。
- **成功记录**：如果满足，继续前进，直到找到一个完整的解。

## 示例 1. 二叉树问题

问题：给定一棵二叉树，搜索并记录所有值为目标值的节点，并返回节点列表。

```cpp
#include <iostream>
#include <vector>
using namespace std;
struct TreeNode {
    int val;
    TreeNode *left;
    TreeNode *right;
    TreeNode(int x) : val(x), left(NULL), right(NULL) {}
};

void backtrack(TreeNode* node, int target, vector<TreeNode*>& result) {
    if (!node) return;
    // 选择当前节点
    if (node->val == target) {
        result.push_back(node);
    }
    // 继续搜索左子树和右子树
    backtrack(node->left, target, result);
    backtrack(node->right, target, result);
}
vector<TreeNode*> findTargetNodes(TreeNode* root, int target) {
    vector<TreeNode*> result;
    backtrack(root, target, result);
    return result;
}
```
